import React, { useEffect, useRef } from "react";
import { useParams, useNavigate } from "react-router-dom";
import "../../../css/lesoneContent.css";
import Back from "../../../assets/BackButton.png";
import leftArrow from "../../../assets/leftArrow.png";
import rightArrow from "../../../assets/rightArrow.png";
import LessonTerms from "../Terms/LessonTerms";

const LesoneContent = () => {
  const { termId } = useParams(); // Get termId from URL
  const navigate = useNavigate();
  const videoRef = useRef(null);

  // Access the correct lesson terms dynamically
  const termsArray = LessonTerms[termId] || []; 

  if (!termsArray.length) {
    return <p>Term not found</p>; // Handle invalid term ID
  }

  const { terms, definition, video } = termsArray[0]; // Show first term by default

  // Auto-play video when term changes
  useEffect(() => {
    if (videoRef.current) {
      videoRef.current.load();
      videoRef.current.play().catch((error) => console.error("Video play error:", error));
    }
  }, [termId]);

  return (
    <>
      <div className="tryone-container">
        <video ref={videoRef} key={video} width="650" height="400" controls autoPlay loop>
          <source src={video} type="video/mp4" />
        </video>
      </div>

      <div className="back-button">
        <button onClick={() => navigate(`/lectureorquiz/${termId}`)}>
          <img src={Back} alt="Back" />
        </button>
      </div>

      <div className="text-container">
        <div className="letter-container">
          <div className="textOne">
            <p className="m-0">{terms}</p>
          </div>
        </div>
        <div className="textOne">
          <p>{definition}</p>
        </div>
      </div>
    </>
  );
};

export default LesoneContent;
